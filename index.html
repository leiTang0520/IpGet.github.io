<!DOCTYPE html>
<html>
<head>
    <title>IPæ˜¾ç¤ºé¡µé¢</title>
</head>
<body>
    <h1>IPåœ°å€ä¿¡æ¯</h1>
    <div id="ipInfo">æ­£åœ¨è·å–ç½‘ç»œä¿¡æ¯...</div>

    <script>
        function displayNetworkInfo() {
            const infoDiv = document.getElementById('ipInfo');
            
            // è·å–æœ¬åœ°ç½‘ç»œä¿¡æ¯ï¼ˆä¸ä¾èµ–å¤–éƒ¨APIï¼‰
            const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
            const networkInfo = {
                userAgent: navigator.userAgent,
                language: navigator.language,
                platform: navigator.platform,
                cookiesEnabled: navigator.cookieEnabled,
                online: navigator.onLine,
                timestamp: new Date().toLocaleString()
            };
            
            if (connection) {
                networkInfo.effectiveType = connection.effectiveType;
                networkInfo.downlink = connection.downlink;
                networkInfo.rtt = connection.rtt;
            }
            
            let infoHTML = `
                <h3>ğŸ“Š è®¿é—®è€…ä¿¡æ¯</h3>
                <p><strong>User Agent:</strong> ${networkInfo.userAgent}</p>
                <p><strong>è¯­è¨€:</strong> ${networkInfo.language}</p>
                <p><strong>å¹³å°:</strong> ${networkInfo.platform}</p>
                <p><strong>åœ¨çº¿çŠ¶æ€:</strong> ${networkInfo.online ? 'åœ¨çº¿' : 'ç¦»çº¿'}</p>
                <p><strong>è®¿é—®æ—¶é—´:</strong> ${networkInfo.timestamp}</p>
            `;
            
            if (networkInfo.effectiveType) {
                infoHTML += `<p><strong>ç½‘ç»œç±»å‹:</strong> ${networkInfo.effectiveType}</p>`;
            }
            
            infoDiv.innerHTML = infoHTML;
            
            // å°è¯•å¤šç§æ–¹å¼è·å–IP
            tryAllIPMethods();
        }
        
        function tryAllIPMethods() {
            const methods = [
                // æ–¹æ³•1: ä½¿ç”¨ä¸åŒçš„ipifyç«¯ç‚¹
                () => fetch('https://api64.ipify.org?format=json'),
                // æ–¹æ³•2: ä½¿ç”¨ipapi.co
                () => fetch('https://ipapi.co/json/'),
                // æ–¹æ³•3: ä½¿ç”¨jsonip.com
                () => fetch('https://jsonip.com/'),
                // æ–¹æ³•4: ä½¿ç”¨httpbin
                () => fetch('https://httpbin.org/ip')
            ];
            
            let currentMethod = 0;
            
            function tryNextMethod() {
                if (currentMethod >= methods.length) {
                    document.getElementById('ipInfo').innerHTML += 
                        '<p style="color: red;"><strong>IPåœ°å€:</strong> è·å–å¤±è´¥ï¼ˆç½‘ç»œé™åˆ¶ï¼‰</p>';
                    return;
                }
                
                methods[currentMethod]()
                    .then(response => response.json())
                    .then(data => {
                        let ip = data.ip || data.origin;
                        if (ip && ip !== 'unknown') {
                            document.getElementById('ipInfo').innerHTML += 
                                `<p style="color: green;"><strong>IPåœ°å€:</strong> ${ip}</p>`;
                        } else {
                            tryNextMethod();
                        }
                    })
                    .catch(error => {
                        console.log(`æ–¹æ³• ${currentMethod + 1} å¤±è´¥:`, error);
                        currentMethod++;
                        tryNextMethod();
                    });
            }
            
            tryNextMethod();
        }
        
        // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ
        window.onload = displayNetworkInfo;
    </script>
</body>
</html>
